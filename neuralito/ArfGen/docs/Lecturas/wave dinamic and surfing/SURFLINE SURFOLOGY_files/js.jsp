
if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;  
var YT={};(function(){YT.$=function(id){return document.getElementById(id);};YT.dom={setDisplay:function(elem,show){if(!elem){return;}
elem.style.display=(show)?'':'none';},truncateAtWord:function(value,len,isSmart){if(value&&value.length>len){var truncStr=value.substring(0,len);var truncAtWrd=truncStr.replace(/\w+$/,'');if(isSmart&&truncAtWrd.length==0){return truncStr;}else{return truncAtWrd;}}
return value;}};YT.trim=function trim(value){return value.replace(/^\s+|\s+$/g,'');};YT.G={};YT.G.POST='POST';YT.G.GET='GET';YT.G.SUCCESS='success';YT.G.FAILED='failed';YT.G.ICS_SRVR='';YT.G.ATS_SRVR='';YT.G.TLOG_SRVR='';YT.G.IMG_SRVR='';YT.G.LOGO_SRVR='';YT.G.ATS_NEW_WINDOW=true;YT.G.USE_ATS_GET=false;YT.Params={Server:{},Client:{},BASELOG:{AdType:null,StoreId:null,ProductsTheme:null,PageUrl:null,ISN:null,UserId:null,ServiceControlID:null,ZiniRealm:null,ZiniStrategy:null,SozFeatures:null,PublisherURL:null},TLOG:{PublisherId:null,SID:null},ATSLOG:{PublisherID:null,ClickTrackerURL:null,sid:null,AffiliateID:null,AffiliateName:null},addParamsObj:function(gObj,pObj){var v;for(var k in pObj){v=pObj[k];if(v!==null&&v!==undefined){gObj[k]=v;}}}};})();(function(){var _msxml_progid=['Microsoft.XMLHTTP','MSXML2.XMLHTTP.3.0','MSXML2.XMLHTTP'];var _post_header='application/x-www-form-urlencoded';var tId=0;function createXhrObject(){var o={};var http=null;try{http=new XMLHttpRequest();}
catch(e){for(var i=0;i<_msxml_progid.length;++i){try{http=new ActiveXObject(_msxml_progid[i]);break;}
catch(e1){}}}
o.tId=tId++;o.xhr=http;return o;}
function handleReadyState(xhrObj,callback){if(callback===undefined||callback===null){return;}
var xhr=xhrObj.xhr;xhr.onreadystatechange=function(){try{if(xhr.readyState!==undefined&&xhr.readyState==4&&xhr.status!==undefined){if(callback&&callback.onXhrDone){callback.onXhrDone(createResponseObject(xhrObj));}}}
catch(e){}};}
function createResponseObject(xhrObj){var obj={};obj.status=(xhrObj.xhr.status==200)?YT.G.SUCCESS:YT.G.FAILED;obj.statusText=(xhrObj.xhr.status==1223)?"No Content":xhrObj.xhr.statusText;obj.responseText=xhrObj.xhr.responseText;obj.tId=xhrObj.tId;return obj;}
YT.XHR={send:function(method,uri,postData,callback){method=method.toUpperCase();if(method=='GET'&&postData!==null){if(postData.length!==0){uri+=((uri.indexOf('?')==-1)?'?':'&')+postData;}}
var o=createXhrObject();handleReadyState(o,callback);var http=o.xhr;http.open(method,uri,true);http.setRequestHeader("Content-type",_post_header);http.setRequestHeader("Connection","close");http.send(method=='POST'?postData:null);return o;},getEncodedPostStr:function(postData,o){if(!postData){postData='';}
for(var key in o){if(o[key]&&o[key]!==''){if(postData.substring(postData.length-1,postData.length)!='&'){postData+="&";}
postData+=encodeURIComponent(key)+"="+encodeURIComponent(o[key])+"&";}}
var len=postData.length;if(len>0){postData=postData.substr(0,len-1);}
return postData;}};})();YT.iCS={GET_DATA:0,GET_CATEGORY_DATA:1,GET_KEYWD_DATA:2,POST_STR:'',queryOffers:function(callback){var g=YT.G;var xhrO=YT.XHR.send(g.POST,g.ICS_SRVR,this.getPostStr(),callback);xhrO.queryType=this.GET_DATA;return xhrO;},queryCategory:function(catId,catName,callback){var g=YT.G;var catPost={categoryName:catId,categoryDisplayName:catName};var xhrO=YT.XHR.send(g.POST,g.ICS_SRVR,this.getCustomPostStr(catPost),callback);xhrO.queryType=this.GET_CATEGORY_DATA;xhrO.catId=catId;return xhrO;},querySearch:function(keywords,callback){var g=YT.G;var keywdPost={keywd:keywords};var xhrO=YT.XHR.send(g.POST,g.ICS_SRVR,this.getCustomPostStr(keywdPost),callback);xhrO.queryType=this.GET_KEYWD_DATA;xhrO.keywd=keywords;return xhrO;},getPostStr:function(){if(this.POST_STR===''){var postStr=YT.XHR.getEncodedPostStr(null,YT.Params.Server);postStr=YT.XHR.getEncodedPostStr(postStr,YT.Params.Client);this.POST_STR=postStr;}
return this.POST_STR;},getCustomPostStr:function(customObj){var postStr=this.getPostStr();return YT.XHR.getEncodedPostStr(postStr,customObj);}};YT.iCS.xhrScope=YT.iCS;YT.TLOG={SEARCH:'SEARCH',KEYWORD:'KEYWORD',LOGPREFIX:'logType=event-log.widgetEvents&',_nLogs:0,CAT_SELECT:'CATEGORY_SELECT',CAT_DESELECT:{EventType:'CATEGORY_DESELECT',Direction:'CATEGORY_DESELECT'},NAVIGATE:{EventType:'NAVIGATE',Direction:'1:2'},PREVIOUS:{EventType:'SCROLL',Direction:'PREVIOUS'},logNext:function(prods){var evt={EventType:'SCROLL',Direction:'NEXT',ProductsViewed:prods};this.doLog(evt);},logPrevious:function(prods){var evt={EventType:'SCROLL',Direction:'PREVIOUS',ProductsViewed:prods};this.doLog(evt);},logCatSelect:function(catId,catName,prods){var logEvt={EventType:this.CAT_SELECT,Direction:this.CAT_SELECT,CategoryName:catId,CategoryDisplayName:catName,ProductsViewed:prods};this.doLog(logEvt);},logCatDeselect:function(){this.doLog(this.CAT_DESELECT);},logKeywdSrch:function(uiElem,msg,keyword){var logEvt={EventType:this.SEARCH,Direction:uiElem,ProductsViewed:msg,SearchKeyword:keyword};this.doLog(logEvt);},logPg1_2:function(){this.doLog(this.NAVIGATE);},logBanner:function(name){this.doLog({EventType:'BANNER',Direction:name})},doLog:function(logEvt){logEvt.Timestamp=new Date();var postStr=YT.XHR.getEncodedPostStr(this.LOGPREFIX,YT.Params.BASELOG);postStr=YT.XHR.getEncodedPostStr(postStr,YT.Params.TLOG);postStr=YT.XHR.getEncodedPostStr(postStr,logEvt);var g=YT.G;YT.XHR.send(g.POST,g.TLOG_SRVR,postStr,this);},onXhrDone:function(respObj){if(respObj.status==YT.G.SUCCESS){this._nLogs++;}}};YT.ATS={CLICK_THRU:'CLICK_THRU',BRAND:'BRAND',CATEGORY:'CATEGORY',ATS_CMD:'cmd',ATS_FORM_ID:'atsForm',CATEGORY_OFFER_TYPE:'CATEGORY_OFFER_TYPE',_getClkObj:function(adLink,adPosition,product,clickX,clickY,clickTime){return{cmd:this.CLICK_THRU,AdLink:adLink,AdPosition:adPosition,ClickType:product.offer_type,ProductID:product.id,ProductCategory:(typeof product.category_id!='undefined')?product.category_id:product.cat_id,OfferType:product.offer_type,ProductPrice:product.offerPrice.replace(/^[^\d]*(.*)$/,"$1"),CurrencyCode:product.c_code,MerchantID:product.merchant_id,Provider:product.provider,ProductBrand:product.brand,ProductUrl:product.product_url,SozFeatures:product.sozFeatures,DisplayCategoryName:product.display_category_name,DiscountPrice:product.discount_price.replace(/^[^\d]*(.*)$/,"$1"),CPC:product.cpc,CPA:product.cpo,Rank:product.rank,ProviderCategoryID:product.advertiser_category_id,ProviderCategoryName:product.display_advertiser_category_name,GlobalID:product.globalid,ClickX:clickX,ClickY:clickY,ClickTime:clickTime};},_getClkBrandObj:function(adLink,adPosition,url,merchantId,providerId,clickX,clickY){return{cmd:this.CLICK_THRU,AdLink:adLink,AdPosition:adPosition,ClickType:this.BRAND,ProductUrl:url,MerchantID:merchantId,Provider:providerId,ClickX:clickX,ClickY:clickY};},_getClkCatObj:function(adLink,adPosition,catId,url,merchantId,providerId,clickX,clickY){return{cmd:this.CLICK_THRU,AdLink:adLink,AdPosition:adPosition,ClickType:this.CATEGORY,ProductUrl:url,MerchantID:merchantId,Provider:providerId,ClickX:clickX,ClickY:clickY};},_clearForm:function(atsForm){atsForm.innerHTML='';},_getAtsForm:function(){var atsForm=YT.$(this.ATS_FORM_ID);if(atsForm){return atsForm;}
atsForm=document.createElement("FORM");atsForm.target=YT.G.ATS_NEW_WINDOW?"_blank":"_top";atsForm.action=YT.G.ATS_SRVR;atsForm.method=YT.G.POST;atsForm.id=this.ATS_FORM_ID;YT.dom.setDisplay(atsForm,false);document.body.appendChild(atsForm);return YT.$(this.ATS_FORM_ID);},_addFormElements:function(atsForm,paramObj){var val;var inputElm;for(var key in paramObj){val=paramObj[key];if(val){inputElm=YT.$(key);inputElm=document.createElement("INPUT");inputElm.type="hidden";inputElm.name=key;atsForm.appendChild(inputElm);inputElm.value=val;}}},_internalSubmitForm:function(clkObj){var atsForm=this._getAtsForm();this._clearForm(atsForm);this._addFormElements(atsForm,YT.Params.BASELOG);this._addFormElements(atsForm,YT.Params.ATSLOG);this._addFormElements(atsForm,clkObj);atsForm.submit();},_encodeURIComponentNew:function(s){var s=utf8(s);var c;var enc="";for(var i=0;i<s.length;i++){if(okURIchars.indexOf(s.charAt(i))==-1)
enc+="%"+toHex(s.charCodeAt(i));else
enc+=s.charAt(i);}
return enc;},_encodeURIField:function(fld)
{if(fld=="")
return"";if(fld==null)
return"";var encodedField="";var s=fld;if(typeof encodeURIComponent=="function")
{encodedField=encodeURIComponent(s);}
else
{encodedField=_encodeURIComponentNew(s);}
return encodedField;},_getAtsGetUrl:function(url,paramObj){if(url==null||url.length==0){return url;}
var flag=false;for(var key in paramObj){var val=paramObj[key];if(val){if(!flag&&url.charAt(url.length-1)=='?'){url=url+key+'='+this._encodeURIField(val);flag=true;}else{url=url+'&'+key+'='+this._encodeURIField(val);}}}
return url;},_doGet:function(clkObj){var url=YT.G.ATS_SRVR+"?";url=this._getAtsGetUrl(url,YT.Params.BASELOG);url=this._getAtsGetUrl(url,YT.Params.ATSLOG);url=this._getAtsGetUrl(url,clkObj);if(YT.G.ATS_NEW_WINDOW){this._newWindow=window.open(url);}else{document.href=url;}},_submitForm:function(clkObj){if(YT.G.USE_ATS_GET){this._doGet(clkObj);}else{this._internalSubmitForm(clkObj);}},clkOffer:function(adLink,adPosition,product,clickX,clickY,clickTime){var clkObj=this._getClkObj(adLink,adPosition,product,clickX,clickY,clickTime);this._submitForm(clkObj);},clkBrandImg:function(adLink,adPosition,url,merchantId,providerId,clickX,clickY){var clkObj=this._getClkBrandObj(adLink,adPosition,url,merchantId,providerId,clickX,clickY);this._submitForm(clkObj);},clkCategory:function(adLink,adPosition,catId,url,merchantId,providerId,clickX,clickY){var clkObj=this._getClkCatObj(adLink,adPosition,catId,url,merchantId,providerId,clickX,clickY);this._submitForm(clkObj);}};  
(function(){YT.ADPOD={CYCLE:'CYCLE',NOCYCLE:'NOCYCLE',max_img_w:90,max_img_h:90,max_hero_w:90,max_hero_h:90,max_merchant_logo_w:80,max_merchant_logo_h:20,anim_on:true,anim_time:4000,anim_restart_time:6000,auto_slide_page2:true,num_prods:1,fetch_more:false,category_all:'Show All',browse_type:'NOCYCLE',max_cats:-1};YT.CCODES={USD:0x0024,GBP:0x00A3};function WgtData(ver,name){this.version=ver;this.name=name;this.STOP_FETCH=false;this.nPType=0;this.nLGType=0;this.offerType=this.PTYPE;this.addCategory({categoryName:'-1',categoryDisplayName:YT.ADPOD.category_all});this.categoryMap[YT.ADPOD.category_all].products=this.products;this.updateCategoryAll();}
function addXhrO(wgtData,o,cb){o.cb=cb;wgtData.xhrObj[o.tId]=o;}
function removeXhrO(wgtData,tId){var xhrO=wgtData.xhrObj[tId];if(xhrO){xhrO.cb=null;xhrO.xhr=null;delete wgtData.xhrObj[tId];xhrO=null;}}
WgtData.prototype.LGTYPE='LEADGEN';WgtData.prototype.PTYPE='PRODUCT';WgtData.prototype.BOTH="BOTH";WgtData.prototype.PRE_SEARCHCAT="search:";WgtData.prototype.ERROR=-1;WgtData.prototype.products=[];WgtData.prototype.productMap=[];WgtData.prototype.categories=[];WgtData.prototype.categoryMap=[];WgtData.prototype.xhrObj={};WgtData.prototype.offerType=null;WgtData.prototype.updateCategoryAll=function(){this.categoryMap[YT.ADPOD.category_all].TOTAL=this.products.length;};WgtData.prototype.getNumProds=function(){return this.products.length;};WgtData.prototype.fetchProducts=function(cb){var o=YT.iCS.queryOffers(this);addXhrO(this,o,cb);};WgtData.prototype.fetchCatProducts=function(catId,catName,cb){var o=YT.iCS.queryCategory(catId,catName,this);addXhrO(this,o,cb);};WgtData.prototype.fetchKeywdProducts=function(keywd,cb){var o=YT.iCS.querySearch(keywd,this);addXhrO(this,o,cb);};WgtData.prototype.onXhrDone=function(respObj){var respTxt=respObj.responseText;var nProds=this.ERROR;if(YT.G.FAILED!=respObj.status&&(typeof respTxt!='undefined')&&respTxt!=null){nProds=this.processData(respObj);}
this.updateCategoryAll();this.doFetchCallback(respObj.tId,nProds);removeXhrO(this,respObj.tId);};WgtData.prototype.doFetchCallback=function(tId,nProds){var xhrO=this.xhrObj[tId];if(xhrO&&xhrO.cb){var cbArgs=(xhrO.cb.cbargs)?[nProds,xhrO.cb.cbargs]:[nProds];if(xhrO.cb.cbscope){xhrO.cb.cbfn.apply(xhrO.cb.cbscope,cbArgs);}
else{xhrO.cb.cbfn(cbArgs);}}};WgtData.prototype.processInline=function(responseText){var nProds=this.ERROR;try{eval(responseText);}
catch(e){return this.ERROR;}
if(typeof ytError!='undefined'||typeof _catNew=='undefined'){return this.ERROR;}
if(ADPOD.max_cats>0&&ADPOD.max_cats<_catNew.length){_catNew.length=ADPOD.max_cats;}
var respArgs={_tId:0,_prods:_productsNew,_cats:_catNew,_isn:_isnNew,_realm:_realmNew,_strategy:_strategyNew,_serverFeatures:_sozFeatures};nProds=this.handleGetData(respArgs);if(this.nLGType>0&&this.nPType>0){this.offerType=this.BOTH;}
else if(this.nLGType>0){this.offerType=this.LGTYPE;}
this.updateCategoryAll();return nProds;}
WgtData.prototype.processData=function(respObj){var nProds=this.ERROR;try{eval(respObj.responseText);}
catch(e){return this.ERROR;}
if(typeof ytError!='undefined'||typeof _catNew=='undefined'){return this.ERROR;}
var respArgs={_tId:respObj.tId,_prods:_productsNew,_cats:_catNew,_isn:_isnNew,_realm:_realmNew,_strategy:_strategyNew,_serverFeatures:_sozFeatures};switch(this.xhrObj[respObj.tId].queryType){case YT.iCS.GET_DATA:nProds=this.handleGetData(respArgs);break;case YT.iCS.GET_CATEGORY_DATA:nProds=this.handleCatData(respArgs,respObj.catId);break;case YT.iCS.GET_KEYWD_DATA:nProds=this.handleKeywdData(respArgs,respObj.keywd);break;default:nProds=this.handleGetData(respArgs);break;}
if(this.nLGType>0&&this.nPType>0){this.offerType=this.BOTH;}
else if(this.nLGType>0){this.offerType=this.LGTYPE;}
return nProds;};WgtData.prototype.handleGetData=function(respArgs){var _cats=respArgs._cats;var nCats=_cats.length;var newCat;for(var i=0;i<nCats;i++){newCat=_cats[i];this.addCategory(newCat);}
var _prods=respArgs._prods;var nProds=_prods.length;var nProdAdded=0;for(var j=0;j<nProds;j++){if(this.setupProduct(_prods[j])){_prods[j].sozFeatures=respArgs._serverFeatures;nProdAdded++;}}
if(nProdAdded==0){this.STOP_FETCH=true;}
YT.Params.addParamsObj(YT.Params.Server,{ad_realm:respArgs._realm});YT.Params.addParamsObj(YT.Params.BASELOG,{ZiniRealm:respArgs._realm,ZiniStrategy:respArgs._strategy,SozFeatures:respArgs._serverFeatures});return nProdAdded;};WgtData.prototype.handleCatData=function(respArgs){var _cats=respArgs._cats;var nCats=_cats.length;var catId=this.xhrObj[respArgs._tId].catId;var newCat;for(var i=0;i<nCats;i++){newCat=_cats[i];if(newCat.categoryName==catId){this.addCategory(newCat);}}
var _prods=respArgs._prods;var nProds=_prods.length;var nProdAdded=0;for(var j=0;j<nProds;j++){if(_prods[j].display_category_name==newCat.categoryDisplayName){if(this.setupProduct(_prods[j])){_prods[j].sozFeatures=respArgs._serverFeatures;nProdAdded++;}}}
if(nProdAdded==0){this.categories[newCat.categoryDisplayName].STOP_FETCH=true;}
return nProdAdded;};WgtData.prototype.handleKeywdData=function(respArgs){var srchCatName=this.PRE_SEARCHCAT+this.xhrObj[respArgs._tId].keywd;this.addCategory({categoryName:srchCatName,categoryDisplayName:srchCatName});var _cats=respArgs._cats;var nCats=_cats.length;var catMap=[];for(var i=0;i<nCats;i++){catMap[_cats[i].categoryDisplayName]=_cats[i];}
var _prods=respArgs._prods;var nProds=_prods.length;var nProdAdded=0;var prod;for(var j=0;j<nProds;j++){prod=_prods[j];if(this.setupProduct(prod,this.categoryMap[srchCatName])){prod.sozFeatures=respArgs._serverFeatures;prod.cat_id=catMap[prod.display_category_name].categoryName;nProdAdded++;}}
if(nProdAdded==0){this.categories[srchCatName].STOP_FETCH=true;}
return nProdAdded;};WgtData.prototype.setupProduct=function(product_obj,category_obj){if(this.productMap[product_obj.id]){return false;}
var true_cat_obj=this.categoryMap[product_obj.display_category_name];var cat_obj=(category_obj)?category_obj:true_cat_obj;if(!cat_obj){return false;}
product_obj.cat_id=cat_obj.categoryName;setupDesc(product_obj);setupImages(product_obj);setupPrice(product_obj);setupMerchantLogo(product_obj);this.productMap[product_obj.id]=product_obj;this.products.push(product_obj);cat_obj.products.push(product_obj);this.TOTAL=this.products.length;cat_obj.TOTAL=cat_obj.products.length;if(product_obj.offer_type==this.LGTYPE){this.nLGType++;}
else if(product_obj.offer_type==this.PTYPE){this.nPType++;if(cat_obj.prodIdx==0&&cat_obj.TOTAL>1&&cat_obj.products[cat_obj.TOTAL-2].offer_type==wgtData.LGTYPE){cat_obj.prodIdx=cat_obj.TOTAL-1;}}
return true;};WgtData.prototype.addCategory=function(newCat){if(!this.categoryMap[newCat.categoryDisplayName]){this.categoryMap[newCat.categoryDisplayName]=newCat;this.categories.push(newCat);newCat.products=[];newCat.prodIdx=0;newCat.idx=this.categories.length-1;}};function getImgDetails(imageUrlVal){if(!imageUrlVal||imageUrlVal==''){return null;}
var imageDetails=imageUrlVal.split('|');var imgindex=0;if(imageDetails.length==4){imgindex=3;if(imageDetails[1].charAt(0)=='0'){imageDetails[1]=imageDetails[1].substring(1);}
if(imageDetails[2].charAt(0)=='0'){imageDetails[2]=imageDetails[2].substring(1);}
imageDetails[1]=parseInt(imageDetails[1]);imageDetails[2]=parseInt(imageDetails[2]);}
var imgurl=imageDetails[imgindex];if(imgurl.search(/^http:/i)==-1){imgurl=YT.G.IMG_SRVR+imageDetails[imgindex];}
if(imageDetails.length==1){imageDetails[1]=0;imageDetails[2]=0;}
imageDetails[3]=imgurl;return imageDetails;}
function setImageWH(imgW,imgH,maxImgW,maxImgH,product_obj){var imgDim=scaleImageWH(imgW,imgH,maxImgW,maxImgH);product_obj.width=imgDim[0];product_obj.height=imgDim[1];}
function setHeroImageWH(imgW,imgH,maxProdImgW,maxProdImgH,product_obj,imgDetails){var imgDim;if(imgDetails[1]!=0&&imgDetails[2]!=0){imgDim=scaleImageWH(imgDetails[1],imgDetails[2],maxProdImgW,maxProdImgH);}
else{imgDim=scaleImageWHRatio(imgW,imgH,maxProdImgW,maxProdImgH);}
product_obj.prod_img_width=imgDim[0];product_obj.prod_img_height=imgDim[1];}
function setMerchantLogoWH(imgW,imgH,maxLogoW,maxLogoH,product_obj){if(product_obj.merchant_logo_url==''){product_obj.merchant_img_width='';product_obj.merchant_img_height='';return;}
var imgDim=scaleImageWH(imgW,imgH,maxLogoW,maxLogoH);product_obj.merchant_img_width=imgDim[0];product_obj.merchant_img_height=imgDim[1];}
function scaleImageWH(imgW,imgH,maxImgW,maxImgH){var scaledW=imgW;var scaledH=imgH;var scaledImg=[];if(imgW>maxImgW){scaledW=maxImgW;scaledH=((maxImgW*imgH)/imgW);}
if(scaledH>maxImgH){scaledH=maxImgH;scaledW=((maxImgH*imgW)/imgH);}
scaledImg[0]=''+scaledW;scaledImg[1]=''+scaledH;return scaledImg;}
function scaleImageWHRatio(imgW,imgH,maxImgW,maxImgH){var scaledW=0;var scaledH=0;var scaledImg=[];if(imgW*maxImgH>imgH*maxImgW){scaledW=maxImgW;scaledH=(imgH*scaledW)/imgW;if(scaledH>maxImgH){scaledH=maxImgH;scaledW=(imgW*scaledH)/imgH;}}else{scaledH=maxImgH;scaledW=(imgW*scaledH)/imgH;if(scaledW>maxImgW){scaledW=maxImgW;scaledH=(imgH*scaledW)/imgW;}}
scaledImg[0]=''+scaledW;scaledImg[1]=''+scaledH;return scaledImg;}
function setupImages(product_obj){var adPod=YT.ADPOD;var srcImageDetails=getImgDetails(product_obj.picture_url);product_obj.picture_url=srcImageDetails[3];var imageDetails=[0,0,0];var smImgDetails;if(product_obj.offer_type==wgtData.PTYPE){imageDetails=getImgDetails(product_obj.thumbnailraw);smImgDetails=imageDetails;if(srcImageDetails[1]!=0&&srcImageDetails[2]!=0){smImgDetails=(product_obj.picture_url.indexOf(YT.G.IMG_SRVR)!=-1)?srcImageDetails:imageDetails;}
product_obj.url=smImgDetails[3];setImageWH(smImgDetails[1],smImgDetails[2],adPod.max_img_w,adPod.max_img_h,product_obj);}
setHeroImageWH(imageDetails[1],imageDetails[2],adPod.max_hero_w,adPod.max_hero_h,product_obj,srcImageDetails);}
function setupPrice(product_obj){product_obj.discount='0';product_obj.showPrice=(!(product_obj.price=='0'||product_obj.price==''));if(product_obj.showPrice){if(!(product_obj.discount_price=='0'||product_obj.discount_price=='')){var nPrice=eval(product_obj.price);var nDiscPrice=eval(product_obj.discount_price);if(nDiscPrice>0&&nDiscPrice<nPrice){var discPerc=''+((nPrice-nDiscPrice)*100)/nPrice;product_obj.discount=discPerc.split('.')[0];}}
product_obj.offerPrice=(product_obj.discount!='0')?product_obj.discount_price:product_obj.price;}}
function setupMerchantLogo(product_obj){if(!product_obj.merchantlogo){return;}
product_obj.merchant_logo_url='';product_obj.merchant_img_width='';product_obj.merchant_img_height='';var imageDetails=getImgDetails(product_obj.merchantlogo);var imgServerPath=((imageDetails!=null)&&(imageDetails.length==5))?'':YT.G.IMG_SRVR;product_obj.merchant_logo_url=imgServerPath+imageDetails[3];var adPod=YT.ADPOD;setMerchantLogoWH(imageDetails[1],imageDetails[2],adPod.max_merchant_logo_w,adPod.max_merchant_logo_w,product_obj);}
function setupDesc(product){var trim=YT.trim;var category=YT.wgtData.categoryMap[product.display_category_name];var desc=product.description;var values=desc.split('|');if(values.length==1){return;}
var offerMessageKey="promo=";var urlKey="url=";var ctaKey="cta=";var offerKey="offer=";product.description=values[0];product.offerMsgs=[];for(var i=1;i<values.length;i++){var value=values[i];var index=value.indexOf(offerMessageKey);if(index!=-1){var rawOffrMsg=value.substring(offerMessageKey.length);var offrMsg=trim(rawOffrMsg);if(rawOffrMsg!=product.description&&offrMsg.length>0){product.offerMsgs.push(offrMsg);}
continue;}
index=value.indexOf(urlKey)
if(index!=-1){category.url=trim(value.substring(urlKey.length));continue;}
index=value.indexOf(ctaKey)
if(index!=-1){product.cta=trim(value.substring(ctaKey.length));continue;}
index=value.indexOf(offerKey)
if(index!=-1){product.offer=trim(value.substring(offerKey.length));continue;}}}
YT.wgtData=new WgtData('0.1','basic');YT.wgtData.xhrScope=YT.wgtData;})();var ADPOD=YT.ADPOD;var wgtData=YT.wgtData;  
(function(){var imgs=[];var nProcessed=0;var imgObjs=[];function onProcessed(){nProcessed++;if(nProcessed==imgs.length){tView.onPreloadDone();imgs=[];imgObjs=[];nProcessed=0;}}
function setupImgs(){for(var i=0;i<imgs.length;i++){var oImage=new Image();oImage.onload=onProcessed;oImage.onerror=onProcessed;oImage.onabort=onProcessed;imgObjs.push(oImage);}}
function loadImgs(){for(var i=0;i<imgs.length;i++){imgObjs[i].src=imgs[i];}}
YT.ImgLoader={SM:'url',LG:'picture_url',BOTH:'both',preload:function(prods,imgType){var otype;var prod;for(var i=0;i<prods.length;i++){prod=prods[i];otype=prod.offer_type;if(prod.offer_type==wgtData.LGTYPE){imgs.push(prod[this.LG]);}
else if(prod.url==prod.picture_url){imgs.push(prod[this.LG]);}
else{switch(imgType){case this.SM:imgs.push(prod[this.SM]);break;case this.LG:imgs.push(prod[this.LG]);break;case this.ALL:imgs.push(prod[this.SM]);imgs.push(prod[this.LG]);break;default:break;}}}
setupImgs();loadImgs();}};})();  
(function(){var bAnimate;var bWgtTimer;var bStart=false;var animateTimerId=0;var checkTimerId=0;function CheckTimer(){if(!(bAnimate||bWgtTimer)){return;}
if(bStart){Start();}}
function StartCheckTimer(){if(bAnimate||bWgtTimer){checkTimerId=window.setTimeout("tTimer.updateCheckTimer()",ADPOD.anim_restart_time);}}
function UpdateCheckTimer(){if(checkTimerId){window.clearTimeout(checkTimerId);checkTimerId=0;}
CheckTimer();checkTimerId=window.setTimeout("tTimer.updateCheckTimer()",ADPOD.anim_restart_time);}
function StopCheckTimer(){if(bAnimate||bWgtTimer){if(checkTimerId){window.clearTimeout(checkTimerId);checkTimerId=0;}}}
function Start(){if(((bAnimate||bWgtTimer)&&bStart&&animateTimerId==0)){animateTimerId=window.setTimeout("tTimer.updateTimer()",ADPOD.anim_time);}}
function Stop(){if(bAnimate||bWgtTimer){if(animateTimerId){clearTimeout(animateTimerId);animateTimerId=0;}}}
function UpdateTimer(){if(animateTimerId){window.clearTimeout(animateTimerId);animateTimerId=0;}
if(!(bAnimate||bWgtTimer)){return;}
if(wgtData.getNumProds()<=0){return;}
tView.doAnimate();animateTimerId=window.setTimeout("tTimer.updateTimer()",ADPOD.anim_time);}
YT.TimerControl={init:function(){bAnimate=(ADPOD.anim_on===true);bWgtTimer=((ADPOD.auto_slide_page2===true)||(wgtData.offerType==wgtData.LGTYPE));},start:function(){bStart=true;Start();StartCheckTimer();},stop:function(){bStart=false;Stop();StopCheckTimer();},setWgtTimer:function(bVal){bWgtTimer=bVal;},getWgtTimer:function(){return bWgtTimer;},updateTimer:function(){UpdateTimer();},updateCheckTimer:function(){UpdateCheckTimer();}};})();var tTimer=YT.TimerControl;  
(function(){var $=YT.$;var mydom=YT.dom;YT.hpod={NAME:'name',DESC:'desc',OFFERMSG:'offermsg_',OFFERMSGWRPR:'offerMsgWrpr',PRICE:'price',ORIG_PRICE:'origprice',DISC:'disc',HERO_IMG:'heroimg',CTA_LINK:'ctalink',show:function(prod){this.setTxt(this.NAME,prod.name,true,prod.id);var d=mydom.truncateAtWord(prod.description,ADPOD.desc_len,true);if(d.length<prod.description){d=d+"...";}
this.setTxt(this.DESC,d,true,prod.id);this.showPromos(prod.offerMsgs,prod.id);this.setImg(prod);this.showPrice(prod.offerPrice,prod.discount,prod.price);this.setCtaLink(prod);},setTxt:function(id,val,bClk,prodid){if(val==null&&val==undefined){return;}
var el=$(id);if(!el){return;}
el.innerHTML=val;if(bClk){el.clkId=prodid;}},displayPromos:function(id,nTotal,bShow){var el;for(var i=1;i<=nTotal;i++){el=$(id+i);if(el){mydom.setDisplay(el,bShow);}}},showPromos:function(vals){var id=this.OFFERMSG;var nTotal=ADPOD.num_promos;this.displayPromos(this.OFFERMSGWRPR,nTotal,false);if(vals==null&&vals==undefined){return;}
var el;var j;var msg;for(j=1;j<=vals.length&&j<=nTotal;j++){msg=mydom.truncateAtWord(vals[j-1],ADPOD.offer_msg_len,true);this.setTxt(id+j,msg,false);}
this.displayPromos(this.OFFERMSGWRPR,j-1,true);},setImg:function(prod){var el=$(this.HERO_IMG);if(!el){return;}
el.src=prod.picture_url;el.width=prod.prod_img_width;el.height=prod.prod_img_height;el.clkId=prod.id;},showPrice:function(price,disc,origprice){if(disc>0){this.setTxt(this.ORIG_PRICE,origprice);this.setTxt(this.DISC,disc+' %');}
else{this.setTxt(this.ORIG_PRICE,'');this.setTxt(this.DISC,'');}
this.setTxt(this.PRICE,price);},setCtaLink:function(prod){var el=$(this.CTA_LINK);if(el){el.clkId=prod.id;var cta=YT.ADPOD.cta;if(prod.cta){cta=prod.cta;}
el.innerHTML=cta;}}};})();  
(function(){var ats=YT.ATS;function FlashWgtView(){}
FlashWgtView.prototype={processData:function(respTxt){var nProds=wgtData.processInline(respTxt);var categories=wgtData.categories;var categoriesResponse=[];for(var i=1;i<categories.length;i++){categoriesResponse.push(categories[i]);}
return categoriesResponse;},onClk:function(index,prodId,clickX,clickY){if(prodId){ats.clkOffer(index,index,wgtData.productMap[prodId],clickX,clickY);}},onClkBrand:function(url,index,provider,merchantId,clickX,clickY){ats.clkBrandImg(index,index,url,merchantId,provider,clickX,clickY);}};YT.FlashWgtView=new FlashWgtView();})();var flashView=YT.FlashWgtView;  